(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5fdf5f92"],{"2d3b":function(t,a,s){"use strict";s.r(a);var n=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"search"},[s("van-search",{attrs:{shape:"round","input-align":"center","show-action":"",background:"#0c0c0c",placeholder:t.dateinit},on:{input:t.changeInput},scopedSlots:t._u([{key:"left",fn:function(){return[s("van-icon",{attrs:{color:"#999",size:"16px",name:"arrow-left"},on:{click:t.goback}})]},proxy:!0},{key:"action",fn:function(){return[t.nowSongId?s("div",{staticClass:"round",on:{click:t.goPlaySong}},[s("van-circle",{attrs:{"layer-color":"#555",color:"#fff","stroke-width":60,rate:t.rate,size:"22px"},scopedSlots:t._u([{key:"default",fn:function(){return[s("div",{staticClass:"img-box",class:1==t.status?"active":""},[s("img",{staticClass:"auto-img",attrs:{src:t.nowSongData.picUrl,alt:""}})])]},proxy:!0}],null,!1,3623537705),model:{value:t.currentRate,callback:function(a){t.currentRate=a},expression:"currentRate"}})],1):t._e()]},proxy:!0}]),model:{value:t.value,callback:function(a){t.value=a},expression:"value"}}),0==t.value.length?s("div",{staticClass:"search-hot"},[s("h3",[t._v("热搜榜")]),s("div",{staticClass:"hot-song-box clearfix"},t._l(t.hotSongsData,(function(a,n){return s("div",{key:n,staticClass:"hot-song clearfix fl",on:{click:function(s){return t.clickHot(a)}}},[s("div",{staticClass:"hot-top fl"},[t._v(t._s(n+1))]),s("div",{staticClass:"song-box fl"},[s("div",{staticClass:"song-name clearfix"},[s("div",{staticClass:"name fl"},[t._v(t._s(a.searchWord))]),s("div",{staticClass:"img-box fl"},[s("img",{attrs:{src:a.iconUrl,alt:""}})])]),s("div",{staticClass:"song-desc"},[t._v(t._s(a.content))])])])})),0)]):s("div",{staticClass:"search-result"},[s("h3",[t._v("搜索结果")]),s("div",{staticClass:"result-list-box"},t._l(t.searchResult,(function(a,n){return s("div",{key:n,staticClass:"result-list",on:{click:function(s){return t.getSongId(a)}}},[s("div",{staticClass:"song-name"},[t._v(t._s(a.name))]),s("div",{staticClass:"song-ar"},[t._l(a.artists,(function(a,n){return s("span",{key:n},[t._v(t._s(a.name)+" ")])})),t._v(" -- "),s("span",[t._v(t._s(a.album.name))])],2),s("div",{staticClass:"song-desc"},t._l(a.alias,(function(a,n){return s("span",{key:n},[t._v(t._s(a))])})),0)])})),0)])],1)},o=[],e=s("5530"),i=(s("f8f9"),s("2f62")),c=Object(i["a"])("musicStore"),l=c.mapState,r=c.mapActions,u={data:function(){return{nowSongData:[],currentRate:0,rate:0,value:"",hotSongsData:[],dateinit:"",searchResult:[]}},created:function(){this.sliderTime(),this.getHotSongs(),this.getDefault()},computed:Object(e["a"])({},l(["status","playedMusicList","nowSongId","audio"])),methods:Object(e["a"])({goback:function(){this.$router.back()},getHotSongs:function(){var t=this;this.axios({method:"GET",url:"http://localhost:3000/search/hot/detail"}).then((function(a){t.hotSongsData=a.data.data})).catch((function(t){}))},getDefault:function(){var t=this;this.axios({method:"GET",url:"http://localhost:3000/search/default"}).then((function(a){t.dateinit=a.data.data.showKeyword})).catch((function(t){}))},changeInput:function(){var t=this;0!=this.value.length&&this.axios({method:"GET",url:"http://localhost:3000/search?",params:{keywords:this.value}}).then((function(a){t.searchResult=a.data.result.songs})).catch((function(t){}))},clickHot:function(t){var a=this;this.value=t.searchWord,this.axios({method:"GET",url:"http://localhost:3000/search?",params:{keywords:this.value}}).then((function(t){a.searchResult=t.data.result.songs})).catch((function(t){}))},sliderTime:function(){var t=this;if(this.nowSongId){this.axios({method:"GET",url:"http://localhost:3000/song/detail?",params:{ids:this.nowSongId}}).then((function(a){t.nowSongData=a.data.songs[0].al,t.rate=Math.floor(a.data.songs[0].dt/1e3)})).catch((function(t){}));if(1!=this.status)return;setInterval((function(){var a=t.audio.currentTime;t.currentRate=a}),800)}},getSongId:function(t){var a=this;this.addPlayedMusic(t),this.getNowId(t.id),this.axios({method:"GET",url:"http://localhost:3000/song/url",params:{id:t.id}}).then((function(t){var s=t.data.data[0].url;a.changeAudioSrc(s).then((function(t){t.load(),t.play()})),a.sliderTime()})).catch((function(t){}))},goPlaySong:function(){this.$router.push({name:"PlaySong"})}},r(["changeAudioSrc","addPlayedMusic","getNowId"]))},h=u,d=s("2877"),f=Object(d["a"])(h,n,o,!1,null,"38ac5cad",null);a["default"]=f.exports},f8f9:function(t,a,s){}}]);
//# sourceMappingURL=chunk-5fdf5f92.7dfbad92.js.map